generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Delegation {
  id                  String    @id @default(cuid())
  title               String
  destination_country String
  destination_city    String
  start_date          DateTime
  start_time          String    @default("09:00")
  end_date            DateTime
  end_time            String    @default("17:00")
  purpose             String
  exchange_rate       Float
  daily_allowance     Float
  notes               String?
  created_at          DateTime  @default(now())
  updated_at          DateTime  @updatedAt
  expenses            Expense[]

  @@map("delegations")
}

model Expense {
  id            String     @id @default(cuid())
  delegation_id String
  date          DateTime
  category      String
  amount        Float
  currency      String
  description   String
  receipt_url   String?
  created_at    DateTime   @default(now())
  updated_at    DateTime   @updatedAt
  delegation    Delegation @relation(fields: [delegation_id], references: [id], onDelete: Cascade)

  @@index([delegation_id], map: "expenses_delegation_id_idx")
  @@map("expenses")
}
